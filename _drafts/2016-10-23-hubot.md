---
layout: post
title: 測試機器人 - Hubot'
tags: ["node","bot"]
date: 2017-10-23 19:02
comments: true
categories: 
- "技術心得"
---
# 神秘助手 - Hubot
Hubot是GitHub開源的一個小程序，是一個可以互動的框架，並且可以非常方便簡單的實施擴充功能。他是基於node.js所開發的，可以幫助下達指令與查找資源，可串接LINE、Messenger等通訊軟體，實現一個ChatBot。因為他具有很大的彈性，程式碼可以用Javascript或Coffee開發，目前我主要利用Hubot幫助我部署程式與各種API測試。

## 輕鬆架設
要使用Hubot首先需要有Node.js跟npm，如果沒有可以參考這篇[NPM 套件管理工具](https://github.com/nodejs-tw/nodejs-wiki-book/blob/master/zh-tw/node_npm.rst)，可以用以下指令測試是否安裝成功
```
# 查看 Node.js 版本
node -v

# 查看 npm 版本
npm -v
```
接下來就直接安裝Hubot
```
npm install -g yo generator-hubot
```
再來創建一個你的Hubot機器人專屬的資料夾，並生成機器人v1.0
```
mkdir bot
cd bot
yo hubot
```
下完指令後會出現下圖
![](/wp-content/uploads/2017/10/2017-10-23-02.JPG)
底下會出現一些設定，把Owner、Bot Name、Description填好，Bot adapter這邊先填campfire。接下來，只要下一個指令，我們的Hubot就會啟動了
```
.\bin\hubot
```
開啟後會出現一個問答的介面，但不管你輸入甚麼他都不會回答你，因為預設只有幾個關鍵詞他才會回應。比如你只要喊他的名字跟說"PING"，他才會回你"PONG"，很可愛吧
```
# 前面名字請改成你的Bot Name
botname ping
botname > PONG
```

## 擴充功能
既然這樣，當然要擴充更多的功能阿，請開啟Script資料夾並新增一個Hello.js，並貼上以下coffee程式碼
```
module.exports = (robot) ->
  robot.respond /hello/i, (res) ->
    res.send "你好"

```
在重新啟動Hubot，並下"BotName hello"指令，他就會回"你好"囉
```
# 前面名字請改成你的Bot Name
botname hello
botname > 你好
```
非常簡單吧，對Javascript比較熟的也可以用JS寫
```
module.exports = function(robot){	
 robot.respond(/(hello)/, function(response){ 
    	response.send("你好");  
    });   
}
```
兩個是做一樣的事，另外如果覺得前面需要叫他名字很煩，可以把respond改成hear，這樣只要聽到hello，他就會回"你好"。

所以會寫Script很重要，如果你之前有寫過nodejs的專案或是相關的技巧，只要是Script能做到的事Hubot都可以做到，很方便吧。

## 利用Adapter與Slack介接
在bot資料夾執行指令
```
npm install hubot-slack --save
```
然後去Slack網頁去新增App，選擇Hubot，並複製他給你的Token，之後執行這段指令，Token替換成你剛剛複製那個
```
HUBOT_SLACK_TOKEN=xoxb-119873885123-yXyhtfbW4XJTZb5ZMaFFaxm3 ./bin/hubot --adapter slack
```
之後就可以跟本機的Hubot透過Slack互動了喔

## 透過Hubot下CommandLine指令




